<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Pet</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <div class="content">
        <h1><br>Your Pet</h1>
        <hr>
         <div style="font-size: 30px;" id="petname">...</div>
Age: <b><span id="petage">...</span></b> <br>
Bond Points: <b><span id="bondpoints">40</span><br></b>Hunger: <b><span id="hunger">7</span></b><br><br><small>(1 year =
    3 real days)</small><br>
    
<img src="about:blank" alt="" id="petimg" width="100%">
<button class="btn" onclick="feed();">Feed (<span id="feeds">...</span>)</button>
<button class="btn" onclick="window.location= '/play' "> Play </button>
<button class="btn" onclick="share();">Share</button><br><br>
<a href="/guide">Pet Guide</a><br>
<a href="/delete">Release into the wild</a>
<audio src="/background.mp3" autoplay loop id="backaudio"></audio>

<script>
    var chomp = new Audio('/chomp.mp3');
    var backaudio = document.getElementById("backaudio");
    backaudio.volume = 0.1;
    localStorage.havepet = true;
    document.getElementById("petname").innerText = localStorage.petname;
    document.getElementById("petage").innerHTML = localStorage.petage;
    document.getElementById("feeds").innerHTML = localStorage.feeds;
    document.getElementById("hunger").innerHTML = localStorage.hunger;
    document.getElementById("bondpoints").innerHTML = localStorage.bondpoints;
    const start = Date.now();
    if (start - localStorage.originalunixage > 259200) {
        localStorage.petage = 1;
        document.getElementById("petage").innerHTML = localStorage.petage;
        localStorage.originalunixage = Date.now();
    }
    function feed() {
        if (localStorage.hunger == 0) {
            return;
        }
        if (localStorage.feeds == 0) {
            if (bondpoints < 10) {
                return;
            }
            localStorage.bondpoints = localStorage.bondpoints - 10;
            localStorage.feeds += 5;
            document.getElementById("feeds").innerHTML = localStorage.feeds;
            document.getElementById("bondpoints").innerHTML = localStorage.bondpoints;
        }
        chomp.play();
        localStorage.feeds = localStorage.feeds - 1;
        localStorage.hunger = localStorage.hunger - 1;
        document.getElementById("feeds").innerHTML = localStorage.feeds;
        document.getElementById("hunger").innerHTML = localStorage.hunger;
        if (localStorage.hunger == 0) {
            localStorage.bondpoints = parseInt(localStorage.bondpoints) + 12;
            document.getElementById("bondpoints").innerHTML = localStorage.bondpoints;
        }
    }
    document.getElementById("petimg").src = "/assets/img/pets/" + localStorage.petlook + "/" + "0" + ".png";
    console.log(start);

    const shareData = {
		title: 'I got a new pet!',
		text: 'I got a new pet on \'MiniPet\' by isaboo.co.uk. Click on the link to see what I got and make your own!',
		url: 'https://minipet.isaboo.co.uk/share?n=' + localStorage.petname + '&l=' + localStorage.petlook + '/0&g=' + localStorage.petgender + '&b=' + localStorage.bondpoints
	}

	// Share must be triggered by "user activation"

	function share() {
		navigator.share(shareData);
	}
</script>
         <footer>
        &copy; isaboo.co.uk 2022. All rights reserved.<br><br>
    </footer>
    </div>
    
</body>
</html>