<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Making new pet...</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="shortcut icon" href="/assets/img/favicon.png" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
    <script src="/assets/js/html2canvas.min.js"></script>
    <script src="https://kit.fontawesome.com/a76afb4366.js" crossorigin="anonymous"></script>
    <script src="/assets/js/pwa.js"></script>
    <script>
        function newbeez() {
            if (window.location.pathname == "/") return;
            if (window.location.pathname == "/newpet") return;
            if (window.location.pathname == "/share") return;
            if (localStorage.petname) return;
            window.location = "/";
        }
        newbeez();
    </script>
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function () {
            var u = "https://minipet.matomo.cloud/";
            _paq.push(['setTrackerUrl', u + 'matomo.php']);
            _paq.push(['setSiteId', '1']);
            var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
            g.async = true; g.src = '//cdn.matomo.cloud/minipet.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g, s);
        })();
    </script>
    <!-- End Matomo Code -->
</head>

<body>

    </div>
    <div class="content"><br>
        <h1><img src="/assets/img/favicon.png" height="50px" style="transform: translateY(15px);">Making new pet...</h1>
        <hr>
        We're getting <span id="pet-name">your pet</span> ready

<br><br>
<br><br>


<div id="loadingtext">Initializing...</div><br><br>
<a href="/reveal" class="btn" id="launch-btn" style="display: none; transition: display 1s; width: 200px; margin: auto;">Show me my pet!</a>


<script>
    console.log(localStorage);
    var checkcount = 0;
    function check() {
        if(look == localStorage.petlook) {
            randomno = Math.floor(Math.random(0) * pets.length);
            name = pets[randomno].name;
            look = pets[randomno].look;
            checkcount++;
            if(checkcount==50) {
                name = pets[randomno].name;
                look = pets[randomno].look;
                return;
            }
            check();
        }
        else {
            return;
        }
    }
    const pets = [
        {look: 'spike', name: 'Mr. Spike', gender: 'm'},
        {look: 'blob', name: 'Mr. Blobby', gender: 'm'},
        {look: 'tadpole', name: 'Miss. Wiggle', gender: 'f'},
        {look: 'stick', name: 'Miss. Stick', gender: 'f'},
        {look: 'blob', name: 'Mr. Lump', gender: 'm'},
        {look: 'tadpole', name: 'Miss. Curly', gender: 'f'},
        {look: 'spike', name: 'Mr. Sharp', gender: 'm'},
    ]
    var randomno = Math.floor(Math.random(0) * pets.length);
    var name = pets[randomno].name;
    var look = pets[randomno].look;
    
    check();
    const gender = pets[randomno].gender;
    localStorage.gotpet = true;
    localStorage.petname = name;
    localStorage.petlook = look;
    localStorage.petgender = gender;
    localStorage.newpet = true;
    localStorage.petage = 0;
    localStorage.feeds = 5;
    localStorage.bondpoints = 40;
    localStorage.hunger = 7;
    console.log(localStorage);
</script>

<script>
    window.setTimeout(function() {
        document.getElementById("launch-btn").style.display = "block";
    }, 11000, true)
</script>

<script>
    const loadingtext = [
        'Deciding personality',
        'Setting traits',
        'Deciding strengths',
        'Choosing weaknessess'
    ]
    var loadingtextbox = document.getElementById("loadingtext");
    var i = 0;                  //  set your counter to 1

    function myLoop() {         //  create a loop function
        setTimeout(function () {   //  call a 3s setTimeout when the loop is called
            loadingtextbox.innerHTML = loadingtext[i] + "...";   //  your code here
            i++;                    //  increment the counter
            if (i < 5) {           //  if the counter < 10, call the loop function
                myLoop();             //  ..  again which will trigger another 
            }
            else {
                loadingtextbox.innerHTML = "Your pet is ready!";
            }                     //  ..  setTimeout()
        }, 2000)
    }

    myLoop();
</script>

<div id="cookies">
<h3 style="text-decoration: none; font-weight: lighter;">This website uses cookies to collect anonymous infomation about how our users use the site and so your pet doesn't disappear every time you close the site. <br><br><div style="text-align: center; width: 100%;"><a style="color: white;" href="/privacy" target="_blank">Find out more</a> <a href="javascript:closecookie()" class="btn">Close</a></div></h3>
</div>
<style>
    #cookies {
        position: fixed;
bottom: 0px;
left: 0px;
width: 100%;
height: 120px;
background-color: rgba(0, 68, 255, 0.808);
color: white;
display: none;
    }
    @media screen and (max-width: 1475px) {
        #cookies {
            height: 160px;
        }
    }
    @media screen and (max-width: 1475px) {
        #cookies h3 {
            font-size: 15px;
        }
    }
</style>
<script>
    function closecookie() {
        localStorage.cookies = true;
        document.getElementById("cookies").style.display = "none";
    }
    function opencookies() {
        if(localStorage.cookies) return;
        document.getElementById("cookies").style.display = "block";
    }
    opencookies();
</script>
    </div>
</body>

</html>